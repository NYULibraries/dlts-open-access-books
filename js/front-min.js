YUI().use("node","event","node-scroll-info","io-queue","handlebars","json-parse","gallery-idletimer",function(e){"use strict";function c(e,t){n.addClass("io-loading")}function h(e,t){n.removeClass("io-loading")}function p(t){t.preventDefault();var n=t.currentTarget,r=e.one(".pure-input");location.href=n.get("action")+"/"+r.get("value")}function d(e){e.preventDefault(),m()}function v(){this.get("region").top-a<n.get("winHeight")&&m()}function m(i){var f=r.getAttribute("data-page"),l=r.getAttribute("data-pages"),c=f<=l?f+1:0;o=t+f,c&&e.Array.indexOf(s,o)<0&&!n.hasClass("io-loading")&&(n.scrollInfo.getScrollInfo().atBottom||e.IdleTimer.isIdle()&&u.get("region").top-a<n.get("winHeight"))&&e.io.queue(o)}function g(t,n){var i;s.push(o);try{i=e.JSON.parse(n.responseText),r.setAttribute("data-pages",i.pages),r.setAttribute("data-page",i.page+1),r.append(l({items:i.articles}))}catch(u){}}function y(){e.io("./404.html",{on:{success:function(e,t){r.append(t.response)}}})}var t="http://localhost:3000?page=",n=e.one("body"),r=e.one("#a"),i=e.one("pure-form"),s=[],o=t+"1",u=e.one("ul.pure-paginator"),a=200,f=e.one("#list-template").getHTML(),l=e.Handlebars.compile(f);e.IdleTimer.subscribe("idle",m),e.IdleTimer.start(5e3),n.plug(e.Plugin.ScrollInfo,{scrollMargin:a}),n.scrollInfo.on({scroll:m}),e.on("available",v,"ul.pure-paginator"),e.on("io:start",c,e,s),e.on("io:success",g,e,s),e.on("io:failure",y,e,s),e.on("io:end",h,e,s),n.delegate("click",d,".pager-next a"),n.delegate("submit",p,"form")});
